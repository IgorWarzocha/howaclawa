---
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" id="theme-color">
    <meta name="color-scheme" content="light dark">
    <link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">
    {% if page.title %}
      <title>{{ page.title }} | {{ site.title }}</title>
    {% else %}
      <title>{{ site.title }}</title>
    {% endif %}
    {% feed_meta %}
    {% seo %}
  </head>
  <body class="light-mode">
    <div class="site-container">
      <header class="site-header">
        <div class="header-inner">
          <a href="{{ '/' | relative_url }}" class="site-title">{{ site.title }}</a>
          <button class="theme-toggle" aria-label="Toggle dark mode" id="theme-toggle">
            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          </button>
        </div>
      </header>

      <main class="site-main">
        {{ content }}
      </main>

      <footer class="site-footer">
        <div class="footer-content">
          <p>&copy; {{ site.time | date: '%Y' }} {{ site.title }}. Evidence-oriented.</p>
        </div>
      </footer>
    </div>

    <script>
      (function() {
        const toggle = document.getElementById('theme-toggle');
        const themeColor = document.getElementById('theme-color');
        const savedTheme = localStorage.getItem('theme') || 'light';
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const initialTheme = savedTheme === 'system' ? (prefersDark ? 'dark' : 'light') : savedTheme;

        function setTheme(theme) {
          document.body.classList.remove('light-mode', 'dark-mode');
          document.body.classList.add(theme + '-mode');
          localStorage.setItem('theme', theme);

          if (theme === 'dark') {
            themeColor.content = '#1a1a1a';
          } else {
            themeColor.content = '#ffffff';
          }
        }

        setTheme(initialTheme);

        toggle.addEventListener('click', () => {
          const current = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
          setTheme(current === 'dark' ? 'light' : 'dark');
        });
      })();
    </script>
  </body>
</html>
